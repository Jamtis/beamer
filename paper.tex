%\def\mode{final}
\let\ifsubmission\iffalse
\let\ifeprint\iffalse

\makeatletter
\@ifundefined{mode}{
    \def\mode{draft}
    \def\class{article}
}{
    \def\class{llncs}
}
\makeatother

\documentclass[\mode]{\class}

\input{config/packages}
\input{config/config}
\input{config/macros}
\input{custom_config/macros}

\def\eprinttitle{eprint title}
\def\submissiontitle{submission title}

\ifeprint
    \title{\resizebox{\textwidth}{!}{\eprinttitle}}
    \subtitle{\small{\submissiontitle}}
\else
    \title{\submissiontitle}
    %\subtitle{\small{\eprinttitle}}
\fi
%\titlerunning{Abbreviated paper title}
\ifsubmission
    \author{\vspace*{-1cm}}
    \institute{\vspace*{-1cm}}
\else
    \ifdraft{
        \author{
            author
        }
    }{
        \author{
            author\inst{1}
            %\and
            %author2\inst{2}
        }
        \authorrunning{author et al.}
        \institute{
            institute
            %\email{}
        }
    }

    % hyper setup
    \hypersetup{
        linktoc=all,
        pdfauthor={author et al.},
        pdftitle={\submissiontitle},
        pdfsubject={},
        pdfkeywords={}
    }
\fi

\addbibresource{cryptobib/abbrev3.bib}
\addbibresource{cryptobib/crypto.bib}
\addbibresource{references.bib}

\begin{document}

\ifdraft{
    \maketitle
}{
    \mymaketitle

    \begin{abstract}
        \input{sections/abstract}
        \keywords{
            keyword1
            \and
            keyword2
        }
    \end{abstract}

    \mytoc
}{}
\setcounter{footnote}{0}

\input{sections/introduction}
\input{sections/contribution}
\input{sections/prelims}
\input{sections/results}
\printbibliography
\appendix
\input{sections/appendix}

\end{document}